
configs:
  init_script:
    file: ./src/init
volumes:
  vscode_data:
  vscode_cli_data:
services:
  vscode:
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      - MACHINE_NAME=YOUR_MACHINE_NAME
    volumes:
      - vscode_data:/root/.vscode-server
      - vscode_cli_data:/root/.vscode/cli/code_tunnel.json
      - vscode_cli_data:/root/.vscode/cli/token.json
      - /var/run/docker.sock:/var/run/docker.sock
    configs:
      - source: init_script
        target: /usr/local/bin/init
        mode: 777
    restart: unless-stopped
    dns:
      - 1.1.1.1
